(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(14),l=t(2),i=function(e){var n=e.person,t=e.remove;return r.a.createElement("div",null,r.a.createElement("p",null,n.name," ",n.number,r.a.createElement("button",{onClick:function(){return t(n)}},"remove")))},m=function(e){var n=e.persons,t=e.remove;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement(i,{person:e,remove:t}))})))},s=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.nameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.newNumber,onChange:e.numberChange})),r.a.createElement("button",{onClick:e.handleClick},"add"))},f=t(3),d=t.n(f),p="/api/persons",b=function(){return d.a.get(p).then((function(e){return e.data}))},h=function(e){return d.a.post(p,e).then((function(e){return e.data}))},v=function(e){return d.a.put("".concat(p,"/").concat(e.id),e).then((function(e){return e.data}))},E=function(e){d.a.delete("".concat(p,"/").concat(e)).catch((function(e){return console.log(e)}))},g=function(e){var n=e.message;if(""===n)return null;return r.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5}},r.a.createElement("p",null,n))},C=function(e){var n=e.message;if(""===n)return null;return r.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5}},r.a.createElement("p",null,n))},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(t),i=Object(l.a)(o,2),f=i[0],d=i[1],p=Object(a.useState)(""),j=Object(l.a)(p,2),O=j[0],w=j[1],k=Object(a.useState)(""),y=Object(l.a)(k,2),S=y[0],U=y[1],N=Object(a.useState)(""),R=Object(l.a)(N,2),z=R[0],A=R[1],D=Object(a.useState)(""),I=Object(l.a)(D,2),J=I[0],T=I[1],x=Object(a.useState)(""),B=Object(l.a)(x,2),P=B[0],q=B[1];Object(a.useEffect)((function(){b().then((function(e){return F(e)}))}),[]);var F=function(e){c(e),d(e)},G=function(e){T(e),setTimeout((function(){T("")}),3e3)},H=function(e){q(e),setTimeout((function(){q("")}),7e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:J}),r.a.createElement(C,{message:P}),"search: ",r.a.createElement("input",{value:z,onChange:function(e){var n=e.target.value;A(n),d(t.filter((function(e){return e.name.toUpperCase().includes(n.toUpperCase())})))}}),r.a.createElement("h2",null,"Add new number"),r.a.createElement(s,{newName:O,nameChange:function(e){w(e.target.value)},newNumber:S,numberChange:function(e){U(e.target.value)},handleClick:function(e){if(e.preventDefault(),t.some((function(e){return e.name===O}))){if(window.confirm("".concat(O," is already added to the phonebook, do you want to replace the old number?"))){var n=t.find((function(e){return e.name===O})).id,a={name:O,number:S,id:n};v(a).then((function(e){var n=t.map((function(e){return e.name===a.name?Object(u.a)({},a):e}));c(n),d(n.filter((function(e){return e.name.toUpperCase().includes(z.toUpperCase())}))),G("Updated ".concat(a.name))})).catch((function(){H("Information of ".concat(a.name," has already been removed from the server, please refresh."))}))}}else{var r={name:O,number:S};h(r).then((function(e){c(e),d(e.filter((function(e){return e.name.toUpperCase().includes(z.toUpperCase())}))),G("Added ".concat(r.name))})).catch((function(e){H(e.response.data.error),console.log(e.response)}))}U(""),w("")}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(m,{persons:f,remove:function(e){if(window.confirm("Delete ".concat(e.name," ?"))){E(e.id);var n=t.filter((function(n){return n.id!==e.id}));F(n),G("Removed ".concat(e.name))}}}))};o.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f99893e6.chunk.js.map